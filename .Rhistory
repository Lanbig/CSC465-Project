library(vioplot)
require(vioplot)
train <- read.delim("~/Desktop/train.tsv", header=FALSE)
View(train)
train <- read.delim("~/Desktop/train.tsv")
View(train)
train[1]
train[2].head
train[2]
train[3]
install.packages("RMySQL")
library(DBI)
library(RMySQL)
myHost <- ‘127.0.0.1’;
myUsername = ‘root’;
myDbname = ‘DepStr’;
myPort = 3306;
myPassword = gue55me;
con = dbConnect(m, user= myUsername, host= myHost, password= myPassword, dbname= myDbname, port= myPort)
m = dbDriver(“MySQL”)
myHost <- ‘127.0.0.1’
myUsername = ‘root’
myDbname = ‘DepStr’
myPort = 3306
myPassword = gue55me
con = dbConnect(m, user= myUsername, host= myHost, password= myPassword, dbname= myDbname, port= myPort)
# create a driver
m = dbDriver(“MySQL”)
myHost <- ‘127.0.0.1’
myUsername = ‘root’
myDbname = ‘DepStr’
myPort = 3306
myPassword = 'gue55me'
con = dbConnect(m, user= myUsername, host= myHost, password= myPassword, dbname= myDbname, port= myPort)
# create a driver
m = dbDriver(“MySQL”)
myHost <- '127.0.0.1'
myUsername = 'root'
myDbname = 'DepStr'
myPort = 3306
myPassword = 'gue55me'
con = dbConnect(m, user= myUsername, host= myHost, password= myPassword, dbname= myDbname, port= myPort)
# create a driver
m = dbDriver("MySQL")
myHost <- '127.0.0.1'
myUsername = 'root'
myDbname = 'DepStr'
myPort = 3306
myPassword = 'gue55me'
con = dbConnect(m, user= myUsername, host= myHost, password= myPassword, dbname= myDbname, port= myPort)
rs <- dbSendQuery(con, "select AGE_DESC from hh_demographic limit 10;")
data <- fetch(rs, n=10)
rs <- dbSendQuery(con, "select AGE_DESC from hh_demographic")
AGE_DESC <- fetch(rs)
rs <- dbSendQuery(con, "select AGE_DESC from hh_demographic")
AGE_DESC <- fetch(rs)
View(AGE_DESC)
rs <- dbSendQuery(con, "select income_desc from hh_demographic")
AGE_DESC <- fetch(rs)
rs <- dbSendQuery(con, "select income_desc from hh_demographic")
AGE_DESC <- fetch(rs)
rs <- dbSendQuery(con, "select AGE_DESC from hh_demographic")
AGE_DESC <- fetch(rs, n=-1)
rs <- dbSendQuery(con, "select AGE_DESC from hh_demographic")
AGE_DESC <- fetch(rs, n=-1)
hist(AGE_DESC)
install.packages("~/Downloads/cart-1.2.2.tar", repos = NULL)
install.packages("~/Downloads/cart-1.2.2.tar")
install.packages("~/Downloads/cart-1.2.2.tar", repos = NULL)
install.packages("libfftw3")
install.packages("~/Downloads/Rcartogram_0.2-2.tar", repos = NULL)
library(ggplot2)
raw_transaction = read.table("transaction_data.csv", sep=",", header=T ,na.strings = " ")
raw_hh = read.table("hh_demographic.csv", sep=",", header=T ,na.strings = " ")
raw_hh_trans <- merge(raw_transaction,raw_hh,by="household_key", all.x=TRUE)
raw_hh_trans <- raw_hh_trans[complete.cases(raw_hh_trans),]
p2f <- ggplot(raw_hh_trans, aes(x=as.factor(raw_hh_trans$AGE_DESC),y=log2(raw_hh_trans$SALES_VALUE), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
#p2f <- p2f + facet_grid(. ~ AGE_DESC,scales="free")
p2f
raw_transaction = read.table("~/Dropbox/CSC465/CSC465-Project/Dataset/transaction_data.csv", sep=",", header=T ,na.strings = " ")
raw_hh = read.table("~/Dropbox/CSC465/CSC465-Project/Dataset/hh_demographic.csv", sep=",", header=T ,na.strings = " ")
raw_hh_trans <- merge(raw_transaction,raw_hh,by="household_key", all.x=TRUE)
raw_hh_trans <- raw_hh_trans[complete.cases(raw_hh_trans),]
p2f <- ggplot(raw_hh_trans, aes(x=as.factor(raw_hh_trans$AGE_DESC),y=log2(raw_hh_trans$SALES_VALUE), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
#p2f <- p2f + facet_grid(. ~ AGE_DESC,scales="free")
p2f
######################
raw_coupon_redempt = read.table("coupon_redempt.csv", sep=",", header=T ,na.strings = " ")
raw_hh_coupon <- merge(raw_coupon_redempt,raw_hh,by="household_key", all.x=TRUE)
raw_hh_coupon <- cbind(raw_hh_coupon,1)
colnames(raw_hh_coupon)[12] <- "nCoupon"
library(plyr)
hh_coupon_agg <- ddply(raw_hh_coupon,.(household_key),numcolwise(sum))
hh_coupon_agg <- merge(hh_coupon_agg,raw_hh,by="household_key", all.x=TRUE)
raw_coupon_redempt = read.table("~/Dropbox/CSC465/CSC465-Project/Dataset/coupon_redempt.csv", sep=",", header=T ,na.strings = " ")
raw_hh_coupon <- merge(raw_coupon_redempt,raw_hh,by="household_key", all.x=TRUE)
raw_hh_coupon <- cbind(raw_hh_coupon,1)
colnames(raw_hh_coupon)[12] <- "nCoupon"
library(plyr)
hh_coupon_agg <- ddply(raw_hh_coupon,.(household_key),numcolwise(sum))
hh_coupon_agg <- merge(hh_coupon_agg,raw_hh,by="household_key", all.x=TRUE)
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f
hh_coupon_agg <- hh_coupon_agg[complete.cases(hh_coupon_agg),]
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- ggtitle("Violin plot of number of coupon redemtion by customer age")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Violin plot of number of coupon redemtion by customer age")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("dddd")
p2f
hh_coupon_agg <- hh_coupon_agg[complete.cases(hh_coupon_agg),]
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
psf <- p2f + stat_summary(fun.y=median, geom="point", size=2, color="red")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
psf <- p2f + geom_jitter(shape=16, position=position_jitter(0.2))
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
#p2f <- p2f + geom_violin(outlier.shape = 3)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
psf <- p2f + geom_jitter(shape=16, position=position_jitter(0.2))
p2f
hh_coupon_agg <- hh_coupon_agg[complete.cases(hh_coupon_agg),]
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=log2(hh_coupon_agg$nCoupon), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=log10(hh_coupon_agg$nCoupon), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=log(hh_coupon_agg$nCoupon), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=log2(hh_coupon_agg$nCoupon), group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
setwd("~/Dropbox/CSC465/CSC465-Project")
hh_coupon_agg <- hh_coupon_agg[complete.cases(hh_coupon_agg),]
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
dev.copy(device = png, filename = 'Violin-CouponByAge.png', width = 1024, height = 768)
dev.off()
p2f <- ggplot(hh_coupon_agg, aes(x=as.factor(hh_coupon_agg$AGE_DESC),y=hh_coupon_agg$nCoupon, group=as.factor(AGE_DESC), fill=AGE_DESC, stat=" summary", fun.y = "mean"))
p2f <- p2f + geom_violin(outlier.shape = 3) + geom_boxplot(width=.1)
p2f <- p2f + ggtitle("Number of Coupon Redemptions by the Age of Customers")
p2f <- p2f + xlab("Age of Customers") + ylab("Number of Coupon Redemptions")
p2f
dev.copy(device = png, filename = 'Violin-CouponByAge.png', width = 800, height = 600)
dev.off()
